---
title: 计算机操作系统 - 死锁
date: '2021-05-13 22:25:40'
---

# 计算机操作系统 - 死锁

## 必要条件

- 互斥：每个资源要么已经分配给了一个进程，要么就是可用的。
- 占有和等待：已经得到了某个资源的进程可以再请求新的资源。
- 不可抢占：已经分配给一个进程的资源不能强制性地被抢占，它只能被占有它的进程显式地释放。
- 环路等待：有两个或者两个以上的进程组成一条环路，该环路中的每个进程都在等待下一个进程所占有的资源。

## 处理方法

- 鸵鸟策略
- 死锁检测与死锁恢复
- 死锁预防
- 死锁避免

## 鸵鸟策略

把头埋在沙子里，假装根本没发生问题

因为解决死锁问题的代价很高，因此鸵鸟策略这种不采取任务措施的方案会获得更高的性能

当发生死锁时不会对用户造成多大影响，或发生死锁的概率很低，可以采用鸵鸟策略

大多数操作系统，包括 Unix，Linux 和 Windows，处理死锁问题的办法仅仅是忽略它

## 死锁检测与死锁恢复

不试图阻止死锁，而是当检测到死锁发生时，采取措施进行恢复。

死锁恢复

- 利用抢占恢复
- 利用回滚恢复
- 通过杀死进程恢复

## 死锁预防

1. 破坏互斥条件

    例如假脱机打印机技术允许若干个进程同时输出，唯一真正请求物理打印机的进程是打印机守护进程

2. 破坏占有和等待条件

    一种实现方式是规定所有进程在开始执行前请求所需要的全部资源

3. 破坏不可抢占条件

4. 破坏环路等待

    给资源统一编号，进程只能按编号顺序来请求资源

## 死锁避免

在程序运行时避免发生死锁

安全状态 银行家算法
